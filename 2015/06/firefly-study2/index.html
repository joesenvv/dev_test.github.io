<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Firefly 学习(二) | wudaijun's blog</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Firefly 学习(二)</h1><a id="logo" href="/.">wudaijun's blog</a><p class="description">Coding is Funny</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="请输入关键字..."></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">Firefly 学习(二)</h1><div class="post-meta"><a href="/2015/06/firefly-study2/#comments" class="comment-count"><i data-disqus-identifier="2015/06/firefly-study2/" class="disqus-comment-count"></i>留言</a><p><span class="date">Jun 03, 2015</span><span><a href="/categories/gameserver/" class="category">gameserver</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><h2 id="一-GlobalObject"><a href="#一-GlobalObject" class="headerlink" title="一. GlobalObject"></a>一. GlobalObject</h2><p>每个节点(即一个FFServer)对应一个GlobalObject，存放该节点的节点信息和分布式信息。GlobalObject中包含多种组件，FFServer根据节点配置信息决定为节点创建哪些组件。这样分布式配置更为灵活，一个节点可以单一职责，也可以多种职责。GlobalObject包含的组件主要有：</p>
<ul>
<li>netfactory: 前端节点，对应netport字段，监听和管理客户端连接。</li>
<li>root: 分布式根节点，对应字段rootport</li>
<li>remote: 分布式子节点，对应字段remoteport</li>
<li>db: 数据库节点</li>
</ul>
<p>简单介绍一下netfactory, root, remote 这三个组件，已经远程调用的实现机制。</p>
<a id="more"></a>
<h3 id="1-前端节点netfactory："><a href="#1-前端节点netfactory：" class="headerlink" title="1. 前端节点netfactory："></a>1. 前端节点netfactory：</h3><p>前端节点netfactory为LibrateFactory(netconnect/protoc.py)，firefly网络层使用twisted，LibrateFactory即为twisted的协议工厂，同时也是网络层到逻辑层的纽带。LibrateFactory有如下成员：</p>
<ul>
<li>connmanager: <ul>
<li>功能: 管理所有Connection，建立ConnID(transport.sessionno)到Conn的映射。</li>
<li>实现: ConnectionManager(netconnection/manager.py)</li>
</ul>
</li>
<li>dataprotocl: <ul>
<li>功能: 消息编解码器，完成消息的编解码，提供pack/unpack/getHeadlength等接口。</li>
<li>实现: DataPackProtoc(netconnection/datapack.py)</li>
</ul>
</li>
<li>protocol: <ul>
<li>功能: 负责处理收到的字节数据，解决粘包半包问题等，通过DataPackProtoc拿到消息ID(command)和消息数据(request)，调用<code>factory.doDataReceived(self, command, requeset)</code>将消息传给netfactory统一处理。</li>
<li>实现: LibrateProtocol(netconnection/protoc.py)</li>
</ul>
</li>
<li>service:<ul>
<li>功能: netfactory上挂载的Service，也就是从网络层到逻辑层的入口，逻辑层在这个Service通道中注册响应函数，netfactory会在收到消息(<code>doDataReceived</code>)时，通过<code>service.callTarget(commandID, conn, data)</code>将消息交由service处理。 </li>
<li>实现: 目前的netfactory上挂载的是netservice，netservice默认为CommandService(utils/services.py)</li>
</ul>
</li>
</ul>
<p>值得一提的是，LibrateProtocol在处理收到的字节流时(<code>dataHandleCoroutine</code>)，利用yield机制非常简洁高效地完成消息解码工作，使解码函数看起来只是在一个<code>while True</code>循环中，无需多次调用，也自然无需保存状态。当外部数据到达时，通过<code>send(data)</code>即可将数据送入dataHandleCoroutine，后者yield返回即可拿到data继续工作了。</p>
<p>另外，LibrateProtocol解析完一条消息后，通过调用<code>factory.doDataReceived</code>将消息交给netfactory，也就是交给逻辑层，由于LibrateProtocol并不知道逻辑层何时返回，因此<code>factory.doDataReceived</code>是一个异步调用，它返回一个Deffer对象，LibrateProtocol注册callback为写回函数<code>safeToWriteData</code>，当逻辑层返回处理结果时，即可将数据线程安全地响应给客户端。这个Deffer对象可以是响应函数(如netservice:handle_100)返回的，如果响应函数没有返回Deffer而是直接返回的响应数据response，将由<code>service.callTarget</code>创建一个Deffer，并且回调deffer.callback(response)，如果响应函数返回None，那么表示这个请求消息没有响应，<code>service.callTarget</code>直接返回None，LibrateProtocol也无需再为其注册<code>safeToWriteData</code>函数了。</p>
<p>注意，整个过程都是在单线程中跑的(reactor)，firefly中的每个节点都使用一个reactor，netfactory在FFServer(server/server.py)中传给reactor（如果该节点配置了netport），在FFServer启动时会启动reactor。</p>
<h3 id="2-分布式根节点root"><a href="#2-分布式根节点root" class="headerlink" title="2. 分布式根节点root"></a>2. 分布式根节点root</h3><p>firefly使用twisted透明代理(Perspective Broker, 简称PB, 参见<a href="1">twisted官方文档</a>)，屏蔽了分布式节点之间的通信机制和细节。在FFServer中，firefly为每一个根节点(具备rootport字段)创建一个PBRoot对象，PBRoot代表分布式根节点，它包含两个构件:</p>
<ul>
<li><p>childmanager:</p>
<ul>
<li>功能: 管理该根节点下面的所有子节点对象(Child对象)，Child主要包含子节点名和子节点的远程调用对象的引用(通过它调用<code>callRemote(函数名，参数)</code>即可调用子节点函数，剩下的细节将由twisted透明代理来完成)。</li>
<li>实现: ChildManager(distributed/manager.py)</li>
</ul>
</li>
<li><p>service:</p>
<ul>
<li>功能: 和netfactory一样，service用于挂载本节点提供的接口(用于其它节点调用)，firefly所有的节点都抽象出一个service用于管理本节点的接口，除了netfactory的netservice以外，其它节点的service均为Service对象，Service对象根据函数名而不是commandID来调用接口。</li>
<li>实现: Service(utils/services.py) </li>
</ul>
</li>
</ul>
<p>子节点在连接到根节点时，由子节点发起一个takeProxy的远程调用，参数为子节点名和其远程调用对象(继承自twisted.spread.pb.Referenceble)，触发PBRoot的remote_takeProxy，该函数记录该子节点和其远程调用对象)。之后根节点PBRoot可通过<code>callChild(子节点名，函数名，参数)</code>调用子节点函数。关键代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">class PBRoot(pb.Root):</div><div class="line">    </div><div class="line">    def __init__(self,dnsmanager = ChildsManager()):</div><div class="line">        self.service = None</div><div class="line">        self.childsmanager = dnsmanager</div><div class="line">    </div><div class="line">    # 远程调用: 初始化子节点</div><div class="line">    def remote_takeProxy(self,name,transport):</div><div class="line">        log.msg(&apos;node [%s] takeProxy ready&apos;%name)</div><div class="line">        child = Child(name,name)</div><div class="line">        self.childsmanager.addChild(child)</div><div class="line">        child.setTransport(transport)</div><div class="line">        self.doChildConnect(name, transport)</div><div class="line">        </div><div class="line">    # 远程调用: 调用本节点上实现的响应函数    </div><div class="line">    def remote_callTarget(self,command,*args,**kw):</div><div class="line">        data = self.service.callTarget(command,*args,**kw)</div><div class="line">        return data</div><div class="line">        </div><div class="line">    # 调用子节点方法</div><div class="line">    def callChild(self,key,*args,**kw):</div><div class="line">        return self.childsmanager.callChild(key,*args,**kw)</div></pre></td></tr></table></figure>
<h4 id="3-分布式子节点remote"><a href="#3-分布式子节点remote" class="headerlink" title="3. 分布式子节点remote"></a>3. 分布式子节点remote</h4><p>FFServer为每一个子节点(具备remoteport字段)创建N个RemoteObject对象(N为其根节点个数，即remoteport字段的元素个数)，globalobject.remote是一个map，通过remote[根节点名]可以得到连接到指定根节点的RemoteObject。为每一个根节点都创建一个RemoteObject的好处是：同样一个子节点，可以对不同的根节点提供不同的接口。</p>
<p>RemoteObject包含如下构件:</p>
<ul>
<li>_reference:<ul>
<li>功能: 这就是前面提到的远程调用对象，继承自<code>twisted.spread.pb.Referenceble</code>，因此它支持远程调用，即callRemote方法。前提是要将该对象传给根节点。</li>
<li>实现: ProxyReference(distributed/reference.py)</li>
</ul>
</li>
<li>_factory: PBClientFactory实例，用于获取跟节点的远程调用对象(getRootOBject)</li>
<li>_name: 节点名字</li>
</ul>
<p>在<code>RemoteObject.connect(self, addr)</code>中，子节点连接到根节点时，需要先远程调用根节点的takeProxy函数，并将_reference和_name传给该函数作为参数，如此根节点的childmanager会记下该子节点及其远程调用对象。关键代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">class RemoteObject(object):</div><div class="line">    &apos;&apos;&apos;远程调用对象&apos;&apos;&apos;</div><div class="line">    </div><div class="line">    def __init__(self,name):</div><div class="line">        self._name = name</div><div class="line">        self._factory = pb.PBClientFactory()</div><div class="line">        self._reference = ProxyReference()</div><div class="line">        self._addr = None</div><div class="line">        </div><div class="line">    def connect(self,addr):</div><div class="line">        &apos;&apos;&apos;初始化远程调用对象&apos;&apos;&apos;</div><div class="line">        self._addr = addr</div><div class="line">        reactor.connectTCP(addr[0], addr[1], self._factory)</div><div class="line">        self.takeProxy()</div><div class="line">        </div><div class="line">    def reconnect(self):</div><div class="line">        &apos;&apos;&apos;重新连接&apos;&apos;&apos;</div><div class="line">        self.connect(self._addr)</div><div class="line">        </div><div class="line">    def addServiceChannel(self,service):</div><div class="line">        &apos;&apos;&apos;设置引用对象&apos;&apos;&apos;</div><div class="line">        self._reference.addService(service)</div><div class="line">        </div><div class="line">    def takeProxy(self):</div><div class="line">        &apos;&apos;&apos;向远程服务端发送代理通道对象</div><div class="line">        &apos;&apos;&apos;</div><div class="line">        deferedRemote = self._factory.getRootObject()</div><div class="line">        deferedRemote.addCallback(callRemote,&apos;takeProxy&apos;,self._name,self._reference)</div><div class="line">    </div><div class="line">    def callRemote(self,commandId,*args,**kw):</div><div class="line">        &apos;&apos;&apos;远程调用&apos;&apos;&apos;</div><div class="line">        deferedRemote = self._factory.getRootObject()</div><div class="line">        return deferedRemote.addCallback(callRemote,&apos;callTarget&apos;,commandId,*args,**kw)</div></pre></td></tr></table></figure>
<h2 id="二-Service装饰器"><a href="#二-Service装饰器" class="headerlink" title="二. Service装饰器"></a>二. Service装饰器</h2><p>至此，除了db和master节点之外，普通分布式节点已经能够正常通讯并且实现远程调用，由于netfactory, root, remote每个组件都抽离出了service用于挂载响应函数，因此firefly在server/globalobject.py中，实现了几个简单的装饰器：netserviceHandle remoteserviceHandle rootserviceHandle，分别用于挂载netfactory，root，remote的响应函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">def netserviceHandle(target):</div><div class="line">    GlobalObject().netfactory.service.mapTarget(target)</div><div class="line">        </div><div class="line">def rootserviceHandle(target):</div><div class="line">    GlobalObject().root.service.mapTarget(target)</div><div class="line"></div><div class="line">class remoteserviceHandle:</div><div class="line">	&apos;&apos;&apos; remoteserviceHandle装饰器需要一个参数，指出该接口提供给哪一个根节点使用</div><div class="line">    def __init__(self,remotename):</div><div class="line">        self.remotename = remotename</div><div class="line">        </div><div class="line">   	def __call__(self,target):</div><div class="line">       GlobalObject().remote[self.remotename]._reference._service.mapTarget(target)</div></pre></td></tr></table></figure>
<p>这样客户端不用再知道关于globalobject的实现细节，用起来就像上一篇博客中的例子一样简单，暴露给用户globalobject组件只有root和remote，用于实现子节点和父节点之间的远程调用。</p>
</div><div class="tags"><a href="/tags/firefly/">firefly</a><a href="/tags/python/">python</a></div><div class="post-share"></div><div class="post-nav"><a href="/2015/07/erlang-superviosr/" class="pre">Erlang supervisor</a><a href="/2015/05/twisted/" class="next">Twisted</a></div><div id="comments"><div id="disqus_thread"></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#一-GlobalObject"><span class="toc-text">一. GlobalObject</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-前端节点netfactory："><span class="toc-text">1. 前端节点netfactory：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-分布式根节点root"><span class="toc-text">2. 分布式根节点root</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-分布式子节点remote"><span class="toc-text">3. 分布式子节点remote</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二-Service装饰器"><span class="toc-text">二. Service装饰器</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/10/2017-9-26-ngs-battle/">探讨服务端回合制战斗系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/go-conetxt-usage/">用context库规范化Go的异步调用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/go-vs-erlang/">Go vs Erlang</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/erlang-lua-reconstruction/">Erlang+Lua的一次重构</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/lua-notes/">Lua 闭包 环境 包管理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/max-osx-ulimit/">Mac OS X下的资源限制</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/go-command-notes/">Go 常用命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/css-notes/">CSS 笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/erlang-memory-debug/">Erlang 内存问题诊断</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/unicode-in-erlang/">Erlang Unicode编码</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Tool/">Tool</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/c-c/">c/c++</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/erlang/">erlang</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/gameserver/">gameserver</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/go/">go</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/lua/">lua</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/network/">network</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/os/">os</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/">other</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/system/">system</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tool/">tool</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/unity/">unity</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/tcp-ip/" style="font-size: 15px;">tcp/ip</a> <a href="/tags/ngserver/" style="font-size: 15px;">ngserver</a> <a href="/tags/lua/" style="font-size: 15px;">lua</a> <a href="/tags/skynet/" style="font-size: 15px;">skynet</a> <a href="/tags/erlang/" style="font-size: 15px;">erlang</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/tool/" style="font-size: 15px;">tool</a> <a href="/tags/firefly/" style="font-size: 15px;">firefly</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/kbengine/" style="font-size: 15px;">kbengine</a> <a href="/tags/distribution/" style="font-size: 15px;">distribution</a> <a href="/tags/unity/" style="font-size: 15px;">unity</a> <a href="/tags/c-c/" style="font-size: 15px;">c/c++</a> <a href="/tags/other/" style="font-size: 15px;">other</a> <a href="/tags/mongodb/" style="font-size: 15px;">mongodb</a> <a href="/tags/os/" style="font-size: 15px;">os</a> <a href="/tags/web/" style="font-size: 15px;">web</a> <a href="/tags/gameserver/" style="font-size: 15px;">gameserver</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/go/" style="font-size: 15px;">go</a> <a href="/tags/goa/" style="font-size: 15px;">goa</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/system/" style="font-size: 15px;">system</a> <a href="/tags/macosx/" style="font-size: 15px;">macosx</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">五月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">三月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">二月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">一月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">十二月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">十一月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">十月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">九月 2014</a></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">wudaijun.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>var disqus_shortname = 'wudaijun';
var disqus_identifier = '2015/06/firefly-study2/';
var disqus_title = 'Firefly 学习(二)';
var disqus_url = 'http://wudaijun.com/2015/06/firefly-study2/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//wudaijun.disqus.com/count.js" async></script><script type="text/javascript" src="//wudaijun.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></body></html>