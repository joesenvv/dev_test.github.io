<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>MongoDB 存储引擎 | wudaijun's blog</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">MongoDB 存储引擎</h1><a id="logo" href="/.">wudaijun's blog</a><p class="description">Coding is Funny</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="请输入关键字..."></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">MongoDB 存储引擎</h1><div class="post-meta"><a href="/2016/06/mongodb-storage-engine/#comments" class="comment-count"><i data-disqus-identifier="2016/06/mongodb-storage-engine/" class="disqus-comment-count"></i>留言</a><p><span class="date">Jun 25, 2016</span><span><a href="/categories/database/" class="category">database</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><p>MongoDB目前支持三种存储引擎：MMAPv1 Storage Engine，In-Memory Storage Engine, WiredTiger Storage Engine。</p>
<h2 id="MMAPv1-Storage-Engine"><a href="#MMAPv1-Storage-Engine" class="headerlink" title="MMAPv1 Storage Engine"></a>MMAPv1 Storage Engine</h2><p>MongoDB3.2之前版本的默认引擎。</p>
<h3 id="1-存储原理"><a href="#1-存储原理" class="headerlink" title="1. 存储原理"></a>1. 存储原理</h3><p>文档在磁盘中连续存放，文档所占用的磁盘空间包括文档数据所占空间和文档填充(padding)。</p>
<p><img src="/assets/image/mongodb/MMAPv1_storage_engine.png" alt=""></p>
<p>摘自：MongoDB MMAPv1内部实现：<a href="http://www.mongoing.com/archives/1484" target="_blank" rel="external">http://www.mongoing.com/archives/1484</a></p>
<a id="more"></a>
<h4 id="1-1-文档移动"><a href="#1-1-文档移动" class="headerlink" title="1.1 文档移动"></a>1.1 文档移动</h4><p>由于文档在磁盘中连续存放，当文档大小增长时，可能需要重新分配文档空间，并更新索引。这会使写入效率降低，因此通常MongoDB为文档分配的record空间会包括document数据和padding空间。这样减少了文档移动的可能性，提高了写入效率。</p>
<h4 id="1-2-padding算法"><a href="#1-2-padding算法" class="headerlink" title="1.2 padding算法"></a>1.2 padding算法</h4><p> 在MongoDB3.0之前，MMAPv1使用填充因子(<a href="http://openmymind.net/Whats-A-Padding-Factor/" target="_blank" rel="external">padding factor</a>)来决定空间分配，填充因子会根据文档移动的频繁度动态调整(初始时为1.0)，当padding factor = 1.5时，MMAPv1将为文档分配<code>sizeof(record) = 1.5 * sizeof(document)</code>的空间，其中<code>0.5*sizeof(document)</code>用作padding。</p>
<p>padding factor这种方式看起来很智能，但是由于文档的record大小不一，在文档删除或移动之后，文档原来分配的空间很难被再次利用，从而造成了磁盘碎片，这也是MongoDB3.0之前数据占用磁盘空间大的主要原因之一。</p>
<p>因此在MongoDB3.0之后，不再使用padding factor填充机制，而使用<a href="https://docs.mongodb.com/manual/core/mmapv1/#power-of-2-sized-allocations" target="_blank" rel="external">Power of 2 Sized Allocations</a>，为每个文档分配2的N次方的空间(超过2MB则变为2MB的倍数增长)，这样做既可以减少文档的移动，文档被删除或移动后的空间也可以被有序地组织起来，达成复用(只能被其所在collection的文档复用)。除了Power of 2 Sized Allocations外，MongoDB3.0还提供了<a href="https://docs.mongodb.com/manual/reference/command/collMod/#noPadding" target="_blank" rel="external">no padding</a>分配策略，即只分配文档实际大小的磁盘空间，但应用程序需要确保文档大小不会增长。</p>
<p>虽然Power of 2 Sized Allocations解决了磁盘碎片的问题，但改进后的MMAPv1引擎仍然在数据库级别分配文件，数据库中的所有集合和索引都混合存储在数据库文件中，并且删除或移动文档后的空间会被保留用以复用，因此磁盘空间无法无法即时自动回收的问题仍然存在(即使drop collection)。</p>
<h3 id="2-并发能力"><a href="#2-并发能力" class="headerlink" title="2.并发能力"></a>2.并发能力</h3><p>在MongoDB3.0之前，只有MMAPv1存储引擎支持，并且只支持Database级的锁，有时候不得不刻意将数据分到多个数据库中提升并发能力。在MongoDB3.0之后，MMAPv1终于支持collection级的并发，并发效率提升了一个档次。参考<a href="https://docs.mongodb.com/manual/faq/concurrency/" target="_blank" rel="external">MongoDB concurrency FAQ</a>。</p>
<h3 id="3-故障恢复"><a href="#3-故障恢复" class="headerlink" title="3. 故障恢复"></a>3. 故障恢复</h3><p>MongoDB默认记录所有的变更操作日志(<a href="https://docs.mongodb.com/manual/core/journaling/#journaling-and-the-mmapv1-storage-engine" target="_blank" rel="external">journal</a>)并写入磁盘，MongoDB flush变更日志的频率(默认100ms)比flush数据的频率(默认60s)要高，因此journal是MongoDB故障恢复的重要保障。</p>
<h3 id="4-内存占用"><a href="#4-内存占用" class="headerlink" title="4. 内存占用"></a>4. 内存占用</h3><p>由于MMAPv1使用<a href="http://www.cnblogs.com/huxiao-tee/p/4660352.html" target="_blank" rel="external">mmap</a>来将数据库文件映射到内存中，MongoDB总是尽可能的多吃内存，以映射更多的数据文件。并且页面的换入换出基本交给OS控制(MongoDB不建议<a href="https://docs.mongodb.com/manual/core/mmapv1/#journal" target="_blank" rel="external">修改</a>flush频率)，因此，将MongoDB部署在更高RAM环境下，是提升性能的最有效的方式之一。</p>
<h3 id="5-遗留问题"><a href="#5-遗留问题" class="headerlink" title="5. 遗留问题"></a>5. 遗留问题</h3><ul>
<li>磁盘占用，运维人员可能需要定期的整理数据库(<a href="https://docs.mongodb.com/manual/reference/command/compact/" target="_blank" rel="external">compat</a>，<a href="https://docs.mongodb.com/manual/reference/command/repairDatabase/" target="_blank" rel="external">repairDatabase</a>)</li>
<li>内存占用，基本是有多少吃多少</li>
<li>collection级的并发控制仍然偏弱</li>
</ul>
<h2 id="WiredTiger-Storage-Engine"><a href="#WiredTiger-Storage-Engine" class="headerlink" title="WiredTiger Storage Engine"></a>WiredTiger Storage Engine</h2><p>MongoDB version3.0中引入，在MongoDB3.2中，已将WiredTiger作为默认存储引擎。</p>
<h3 id="1-并发能力"><a href="#1-并发能力" class="headerlink" title="1. 并发能力"></a>1. 并发能力</h3><p>文档级别的并发支持，WiredTiger通过MVCC实现文档级别的并发控制，即文档级别锁。这就允许多个客户端请求同时更新一个集合内存的多个文档。更多MongoDB并发模型，参见<a href="https://docs.mongodb.com/manual/faq/concurrency/" target="_blank" rel="external">MongoDB concurrency FAQ</a>。</p>
<h3 id="2-故障恢复"><a href="#2-故障恢复" class="headerlink" title="2. 故障恢复"></a>2. 故障恢复</h3><p>支持checkpoint和journal两种方式进行持久化。</p>
<p>checkpoint是数据库某一时刻的快照，每60s或超过2GB的变更日志执行一次，在写最新快照时，上一个快照仍然有效，防止MongoDB在快照落地时挂掉，在快照落地完成后，上一个快照将被删除。</p>
<p>和MMAPv1一样，支持通过变更日志故障恢复，journal可与checkpoint集合使用，提供快速，可靠的数据恢复。可禁用wiredtiger journal，这在一定程度上可以降低系统开支，对于单点MongoDB来说，可能会导致异常关闭时丢失checkpoint之间的数据，对于复制集来说，可靠性稍高一点。在MongoDB3.2之前的版本中，WiredTiger journal默认在日志超过100MB时持久化journal一次，系统宕机最多会丢失100MB journal数据。在3.2版本中，加入了默认50ms时间间隔刷盘条件。参见官方文档<a href="https://docs.mongodb.com/manual/core/journaling/#journaling-wiredtiger" target="_blank" rel="external">journaling wiredtiger</a>。</p>
<h3 id="3-磁盘占用"><a href="#3-磁盘占用" class="headerlink" title="3. 磁盘占用"></a>3. 磁盘占用</h3><p>不同于MMAPv1在数据库级别分配数据文件，WiredTiger将每个collection的数据和索引单独存放，并且会即时回收文档和集合占用空间。</p>
<p>WiredTiger的另一个两点是支持日志，文档数据块，索引压缩，可配置或关闭压缩算法，大幅度节省了磁盘空间。</p>
<h3 id="4-内存占用-1"><a href="#4-内存占用-1" class="headerlink" title="4. 内存占用"></a>4. 内存占用</h3><p>WiredTiger支持内存使用容量配置，用户可通过<a href="https://docs.mongodb.com/manual/reference/configuration-options/#storage.wiredTiger.engineConfig.cacheSizeGB" target="_blank" rel="external">WiredTiger CacheSize</a>配置MongoDB WiredTiger所能使用的最大内存，在3.2版本中，该参数默认值为<code>max(60%Ram-1GB, 1GB)</code>。这个内存限制的并不是MongoDB所占用的内存，MongoDB还使用OS文件系统缓存(文件可能是被压缩过的)。</p>
<h3 id="5-遗留问题-1"><a href="#5-遗留问题-1" class="headerlink" title="5. 遗留问题"></a>5. 遗留问题</h3><p>相较于MMAPv1，压缩算法和新的存储机制，极大减少了磁盘空间占用，文档级别的并发控制，在多核上吞吐量有明显提升。MongoDB WiredTiger仍然是个吃内存的家伙，虽然可以配置内存最高占用，但更多的内存确实能带来更好的读写效率。</p>
<h2 id="In-Memory-Storage-Engine"><a href="#In-Memory-Storage-Engine" class="headerlink" title="In-Memory Storage Engine"></a>In-Memory Storage Engine</h2><p>纯内存版的MongoDB，限企业版，64bits。简单介绍一下：</p>
<ul>
<li>不维护任何磁盘数据，包括配置数据，索引，用户证书，等等，Everything In Memory</li>
<li>文档级别的并发支持</li>
<li>在启动时配置最大使用内存，默认1GB，超出使用内存将会报错</li>
<li>不可落地，不可恢复</li>
<li>支持分片，复制集</li>
</ul>
<p>总结：为啥不用Redis？</p>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ol>
<li>MongoDB Storage Engine: <a href="https://docs.mongodb.com/manual/core/storage-engines/" target="_blank" rel="external">https://docs.mongodb.com/manual/core/storage-engines/</a></li>
<li>MongoDB Storage FAQ: <a href="https://docs.mongodb.com/manual/faq/storage/" target="_blank" rel="external">https://docs.mongodb.com/manual/faq/storage/</a></li>
<li>MongoDB MMAPv1内部实现：    <a href="http://www.mongoing.com/archives/1484" target="_blank" rel="external">http://www.mongoing.com/archives/1484</a></li>
<li>MongoDB WiredTiger内部实现：<a href="http://www.mongoing.com/archives/2540" target="_blank" rel="external">http://www.mongoing.com/archives/2540</a></li>
<li>MongoDB存储特性与内部原理： <a href="http://shift-alt-ctrl.iteye.com/blog/2255580" target="_blank" rel="external">http://shift-alt-ctrl.iteye.com/blog/2255580</a></li>
<li>MongoDB3.0官方性能测试报告：<a href="http://www.mongoing.com/archives/862" target="_blank" rel="external">http://www.mongoing.com/archives/862</a></li>
</ol>
</div><div class="tags"><a href="/tags/mongodb/">mongodb</a></div><div class="post-share"></div><div class="post-nav"><a href="/2016/06/virtual-memory/" class="pre">虚拟存储器</a><a href="/2016/06/mongodb-read-write/" class="next">MongoDB 读写要点</a></div><div id="comments"><div id="disqus_thread"></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#MMAPv1-Storage-Engine"><span class="toc-text">MMAPv1 Storage Engine</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-存储原理"><span class="toc-text">1. 存储原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-文档移动"><span class="toc-text">1.1 文档移动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-padding算法"><span class="toc-text">1.2 padding算法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-并发能力"><span class="toc-text">2.并发能力</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-故障恢复"><span class="toc-text">3. 故障恢复</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-内存占用"><span class="toc-text">4. 内存占用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-遗留问题"><span class="toc-text">5. 遗留问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WiredTiger-Storage-Engine"><span class="toc-text">WiredTiger Storage Engine</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-并发能力"><span class="toc-text">1. 并发能力</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-故障恢复"><span class="toc-text">2. 故障恢复</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-磁盘占用"><span class="toc-text">3. 磁盘占用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-内存占用-1"><span class="toc-text">4. 内存占用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-遗留问题-1"><span class="toc-text">5. 遗留问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#In-Memory-Storage-Engine"><span class="toc-text">In-Memory Storage Engine</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考："><span class="toc-text">参考：</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/09/ngs-battle/">探讨服务端回合制战斗系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/go-conetxt-usage/">用context库规范化Go的异步调用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/go-vs-erlang/">Go vs Erlang</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/erlang-lua-reconstruction/">Erlang+Lua的一次重构</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/lua-notes/">Lua 闭包 环境 包管理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/max-osx-ulimit/">Mac OS X下的资源限制</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/go-command-notes/">Go 常用命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/css-notes/">CSS 笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/erlang-memory-debug/">Erlang 内存问题诊断</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/unicode-in-erlang/">Erlang Unicode编码</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Tool/">Tool</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/c-c/">c/c++</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/erlang/">erlang</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/gameserver/">gameserver</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/go/">go</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/lua/">lua</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/network/">network</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/os/">os</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/">other</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/system/">system</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tool/">tool</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/unity/">unity</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/tcp-ip/" style="font-size: 15px;">tcp/ip</a> <a href="/tags/ngserver/" style="font-size: 15px;">ngserver</a> <a href="/tags/lua/" style="font-size: 15px;">lua</a> <a href="/tags/skynet/" style="font-size: 15px;">skynet</a> <a href="/tags/erlang/" style="font-size: 15px;">erlang</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/tool/" style="font-size: 15px;">tool</a> <a href="/tags/firefly/" style="font-size: 15px;">firefly</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/kbengine/" style="font-size: 15px;">kbengine</a> <a href="/tags/distribution/" style="font-size: 15px;">distribution</a> <a href="/tags/unity/" style="font-size: 15px;">unity</a> <a href="/tags/c-c/" style="font-size: 15px;">c/c++</a> <a href="/tags/other/" style="font-size: 15px;">other</a> <a href="/tags/mongodb/" style="font-size: 15px;">mongodb</a> <a href="/tags/os/" style="font-size: 15px;">os</a> <a href="/tags/web/" style="font-size: 15px;">web</a> <a href="/tags/gameserver/" style="font-size: 15px;">gameserver</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/go/" style="font-size: 15px;">go</a> <a href="/tags/goa/" style="font-size: 15px;">goa</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/system/" style="font-size: 15px;">system</a> <a href="/tags/macosx/" style="font-size: 15px;">macosx</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">五月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">三月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">二月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">一月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">十二月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">十一月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">十月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">九月 2014</a></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">wudaijun.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>var disqus_shortname = 'wudaijun';
var disqus_identifier = '2016/06/mongodb-storage-engine/';
var disqus_title = 'MongoDB 存储引擎';
var disqus_url = 'http://wudaijun.com/2016/06/mongodb-storage-engine/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//wudaijun.disqus.com/count.js" async></script><script type="text/javascript" src="//wudaijun.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></body></html>